<mat-card *ngIf="gameCharacter">
  <form #postForm="ngForm" (ngSubmit) = "onSubmit()">

    <mat-form-field>
        <input matInput [(ngModel)]="gameCharacter.characterName"
        placeholder = "Nom"
        name = "name" type = "text"
        required>
    </mat-form-field>

    <p>Race: {{gameCharacter.characterClass?.race.raceName}}</p>

    <p>Age: {{gameCharacter.age}} </p>

    <mat-form-field>
      <mat-select placeholder="Sexe"
                  [formControl]="classControl"
                  [(ngModel)]="gameCharacter.sex"
                  (ngModelChange)="sexChanged()"
                  required>
        <mat-option *ngFor="let sex of sexes" [value]="sex.value">
          {{sex.viewValue}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="classControl.hasError('required')">Choisissez un sexe</mat-error>
    </mat-form-field>

    <p>Taille: {{gameCharacter.height}} {{gameCharacter.height? 'm':''}}</p>
    <p>Poids: {{gameCharacter.weight}} {{gameCharacter.weight? 'kg':''}}</p>

    <mat-form-field>
      <mat-select placeholder="Allégeance"
                  [formControl]="classControl"
                  [(ngModel)]="gameCharacter.alliegeance"
                  required>
        <mat-option *ngFor="let alliegeance of alliegeances" [value]="alliegeance">
          {{alliegeance}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="classControl.hasError('required')">Choisissez une allégeance</mat-error>
    </mat-form-field>

    <p>Niveau: 1</p>

    <mat-form-field>
      <mat-select placeholder="Classe"
                  [formControl]="classControl"
                  [(ngModel)]="gameCharacter.characterClass"
                  (ngModelChange)="classChanged()"
                  required>
        <mat-option *ngFor="let class of characterClasses" [value]="class">
          {{class.className}}
        </mat-option>
      </mat-select>
      <mat-error *ngIf="classControl.hasError('required')">Choisissez une classe</mat-error>
    </mat-form-field>

    <p>Classe {{gameCharacter.characterClass?.className}}</p>

    <input (focus)="chooseScore('draw1')"
           [(ngModel)]="draw1" name="draw1"
           [ngModelOptions] = "{standalone:true}">
    <input (focus)="chooseScore('draw2')"
           [(ngModel)]="draw2" name="draw2"
           [ngModelOptions] = "{standalone:true}">
    <input (focus)="chooseScore('draw3')"
           [(ngModel)]="draw3" name="draw3"
           [ngModelOptions] = "{standalone:true}">
    <input (focus)="chooseScore('draw4')"
           [(ngModel)]="draw4" name="draw4"
           [ngModelOptions] = "{standalone:true}">
    <input (focus)="chooseScore('draw5')"
           [(ngModel)]="draw5" name="draw5"
           [ngModelOptions] = "{standalone:true}">
    <input (focus)="chooseScore('draw6')"
           [(ngModel)]="draw6" name="draw6"
           [ngModelOptions] = "{standalone:true}">
    
    <p>Force: </p>
    <input (focus)="chooseScore('strength')"
           [(ngModel)] = "gameCharacter.strength"
           name="strength"
           required>
    <P>Bonus: {{strengthBonus>0? '+':''}}{{strengthBonus}}</P>
    <p>Dextérité: </p>
    <input (focus)="chooseScore('dexterity')"
           [(ngModel)] = "gameCharacter.dexterity"
           name="dexterity"
           required>
    <p>Bonus: {{dexterityBonus>0? '+':''}}{{dexterityBonus}}</p>
    <p>Constitution: </p>
    <input (focus)="chooseScore('constitution')"
           [(ngModel)] = "gameCharacter.constitution"
           name="constitution"
           required>
    <P>Bonus: {{constitutionBonus>0? '+':''}}{{constitutionBonus}}</P>
    <p>Intelligence: </p>
    <input (focus)="chooseScore('intelligence')"
           [(ngModel)] = "gameCharacter.intelligence"
           name="intelligence"
           required>
    <P>Bonus: {{intelligenceBonus>0? '+':''}}{{intelligenceBonus}}</P>
    <p>Sagesse: </p>
    <input (focus)="chooseScore('wisdom')"
           [(ngModel)] = "gameCharacter.wisdom"
           name="wisdom"
           required>
    <P>Bonus: {{wisdomBonus>0? '+':''}}{{wisdomBonus}}</P>
    <p>Charisme: </p>
    <input (focus)="chooseScore('charism')"
           [(ngModel)] = "gameCharacter.charism"
           name="charism"
           required>
    <P>Bonus: {{charismBonus>0? '+':''}}{{charismBonus}}</P>

    <p>Vigueur: {{fortitudeSave>0? '+':''}}{{fortitudeSave}}</p>
    <P>Réflexe: {{reflexSave>0? '+':''}}{{reflexSave}}</P>
    <p>Volonté: {{willSave>0? '+':''}}{{willSave}}</p>

    <p>Pécule: {{gameCharacter.wealth}}</p>
    
    <button mat-raised-button type = "submit">
      Valider
    </button>

    <p>{{gameCharacter | json}}</p>

  </form>
</mat-card>
